<!DOCTYPE html>
<html>
<head>
  <title>refund</title>
  <link rel='stylesheet' href='/styles/bootstrap.min.css' />
  <link rel='stylesheet' href='/styles/style.css' />
  <script src="/js/jquery-2.2.0.min.js" type="text/javascript"></script>
  <script src="/js/bootstrap.min.js" type="text/javascript"></script>
</head>
<body>
<div>
  <nav class="navbar navbar-inverse" style="padding-left:130px;">
    <ul class="nav navbar-nav">
      <li class="active"><a href="/dashboard">Home</a></li>
      <li><a href="/tickets/purchase">Purchase Ticket</a></li>    
      <li><a href="/">Logout</a></li>    
    </ul>
  </nav>
</div>
<table class="table">
  <thead>
    <tr>
      <th scope="col">Origin</th>
      <th scope="col">Destination</th>
      <th scope="col">Trip Date</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody id="ridesTableBody">
    {{#tickets}}
    <tr>
      <td>{{origin}}</td>
      <td>{{destination}}</td>
      <td>{{tripdate}}</td>
      <td>
        <button class="refundBtn" data-id="{{id}}">Request Refund</button>
      </td>
    </tr> 
    {{/tickets}}
  </tbody>
</table>
<script>
  $(document).ready(function() {
    $(".refundBtn").click(function() {
      const ticketid = $(this).data('id');

      if (!ticketid) {
        alert('Ticket ID required');
        return;
      }

          $.ajax({
            type: "POST",
            url: '/api/v1/refund/' + ticketId,
            contentType: 'application/json',
            success: function(serverResponse) {
              if (serverResponse) {
                alert('Ticket refunded');
               
              }
            },
            error: function(errorResponse) {
              if (errorResponse) {
                alert(`Ticket not refunded: ${errorResponse.responseText}`);
              }
            }
          });
        });
      });
    </script>
      </body>
</html> 
   



